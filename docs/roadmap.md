# 習慣管理＋ダイアリーアプリ - 実装ロードマップ

## 📋 アプリコンセプト
日々の習慣管理とダイアリー機能を統合した、温かみのあるデザインのライフログアプリ。
カレンダーを中心とした直感的なUIで、タスク管理と日記記録を一元化し、自分の生活リズムを整えることを目的とする。

### 主な機能
- **習慣管理**: 毎日のやること（例：水を飲む、ジムに行く、薬を飲む）をタスクとして登録・チェック
- **ダイアリー**: 日常の出来事や感想をカテゴリー別に記録
- **レポート機能**: 習慣の達成状況分析とトレンド表示
- **統合ビュー**: カレンダーからその日のタスクと日記を同時に確認

### アプリ構成（5画面）
1. **メイン画面（main）**: カレンダー + 選択日のタスク一覧・進捗表示
2. **タスク作成画面（create）**: 習慣名・繰り返し設定・リマインド時間の入力
3. **ダイアリー一覧画面（diary）**: 日記エントリーの一覧・フィルター機能
4. **ダイアリー作成画面（diaryCreate）**: 日記の作成・カテゴリー管理
5. **レポート画面（report）**: 習慣分析・統計・トレンド表示

### デザインシステム
- **カラーパレット**: 温かみのあるベージュ/黒/ダークオリーブ/セージグリーンの統一感
- **レイアウト**: ドラッグリサイズ可能なサイドバー + メインコンテンツの2カラム
- **コンポーネント**: 角丸カードベースデザイン、微細なグラデーション効果

---

## 🗺️ 実装ロードマップ

### ✅ 現在実装済み（100%）
- ✅ **デザインシステム基盤**: 新カラーパレット、2カラムレイアウト、レスポンシブ対応
- ✅ **タスク管理機能**: 追加・編集・削除・完了管理（繰り返し/単発）
- ✅ **SPA画面遷移**: 5画面間のハッシュベースルーティング
- ✅ **ダイアリー機能**: 一覧表示・作成・編集・カテゴリー管理
- ✅ **カレンダー連携**: 日付選択とタスク表示の同期
- ✅ **進捗表示**: 日別タスク完了率の表示
- ✅ **LocalStorage永続化**: データの保存・読み込み・マイグレーション

### 🚧 実装中（0%）
- ❌ **レポート機能**: 習慣分析とトレンド表示

---

### **フェーズ5: レポート機能実装** 📊
**期間**: 2-3週間  
**目標**: データ分析とトレンド表示機能の完全実装

#### 5.1 基本レポート画面
- [ ] レポート画面（report）のルーティング追加
- [ ] 基本レイアウト（サイドバー + メインコンテンツ）の実装
- [ ] タブスタイルフィルター（ダイアリーと統一デザイン）

#### 5.2 タスクフィルター機能
- [ ] 単一タスク選択機能（ラジオボタン形式）
- [ ] タスク一覧の動的生成
- [ ] フィルター適用後の詳細画面遷移
- [ ] 「フィルター変更」ボタンでの基本画面復帰

#### 5.3 期間フィルター機能
- [ ] 期間選択タブ（今週・今月・カスタム）
- [ ] カスタム期間の日付範囲指定
- [ ] 期間に応じたデータ取得ロジック

#### 5.4 統計データ表示
- [ ] 習慣別パフォーマンス（横棒グラフ風）
- [ ] 日別達成率（折れ線グラフ風）
- [ ] 統計サマリーカード（達成率・継続日数）
- [ ] ハイライト表示（最も頑張った日など）

#### 5.5 タスク詳細分析
- [ ] 選択タスクの詳細テーブル（日付・完了状況）
  ```
  │タスク名     設定した日付     完了チェック│
  │─────────────────────────────│
  │            9月1日           ✓        │
  │水を飲む      9月2日           ✓        │
  │            9月3日           ✗        │
  ```
- [ ] タスク固有の達成率計算
- [ ] 継続日数の算出

#### 5.6 トレンド分析機能
- [ ] 週次比較（今週 vs 先週）
  - 達成率の変化（+5% ↗️）
  - 完了回数の変化（+1回 ↗️）
  - 継続日数の変化（+1日 ↗️）
- [ ] 月次比較（今月 vs 先月）
  - 達成率・完了回数・平均実行回数の比較
- [ ] 変化量の視覚的表示（矢印・パーセンテージ）

#### 5.7 ハイライト機能
- [ ] タスク固有のハイライト生成
  - 最高連続達成日数
  - 最も苦手な曜日の分析
  - 改善傾向の検出
- [ ] モチベーション向上メッセージ

---

### **フェーズ6: UX改善・最終調整** ✨
**期間**: 1週間  
**目標**: レポート機能の使いやすさ向上

#### 6.1 インタラクション改善
- [ ] データロード中のローディング表示
- [ ] フィルター変更時のスムーズなアニメーション
- [ ] エラーハンドリング（データなし状態など）
- [ ] レスポンシブ対応の最終調整

#### 6.2 パフォーマンス最適化
- [ ] 大量データの効率的な処理
- [ ] 計算結果のキャッシュ機能
- [ ] 不要な再計算の防止

---

### **フェーズ7: モバイル最適化** 📱
**期間**: 2週間（将来実装）  
**目標**: PWA化とモバイル体験の向上

#### 7.1 PWA対応
- [ ] Service Worker実装
- [ ] オフライン対応
- [ ] ホーム画面追加機能
- [ ] アプリアイコン・スプラッシュ画面

#### 7.2 リマインド機能
- [ ] 通知API実装
- [ ] 未完了タスクの通知
- [ ] 時間指定リマインダー
- [ ] 通知設定管理

---

## 🔍 技術的考慮事項

### 現在の技術スタック
- **Frontend**: TypeScript + Vanilla JS
- **Styling**: CSS + CSS Variables
- **Storage**: LocalStorage
- **Build**: Vite

### 保持する方針
- ✅ 既存のタスク管理機能（堅実に実装済み）
- ✅ 型安全性（TypeScript の厳密な型定義）
- ✅ 軽量性（Virtual DOM なし、効率的な DOM 操作）
- ✅ 拡張性（将来的なPWA化を見据えた設計）

### レポート機能の技術要件
- **データ集計**: 日付範囲でのタスク完了データの効率的な抽出
- **統計計算**: 達成率・継続日数・トレンド分析のアルゴリズム
- **可視化**: CSS + SVGによる軽量なグラフ表示
- **キャッシュ**: 計算結果の一時保存でパフォーマンス向上

### 実装見積もり
- **フェーズ5**: 2-3週間でレポート機能完成
- **フェーズ6**: 1週間でUX改善完了
- **フェーズ7**: 追加 2週間でPWA対応完成
- **総期間**: 約4-6週間でレポート機能を含む完全版リリース

---

## 📅 マイルストーン

| フェーズ | 完了予定 | 主要成果物 |
|---------|---------|------------|
| ✅ フェーズ1-4 | 完了済み | 基本機能・ダイアリー機能完全実装 |
| フェーズ5 | 3週間後 | レポート機能完全実装 |
| フェーズ6 | 4週間後 | UX改善・最終調整完了 |
| フェーズ7 | 6週間後 | PWA対応・完全版リリース |

---

## 🎯 次のアクション

### 最優先タスク: レポート機能の実装開始
1. **画面構造の実装** (1週間)
   - `src/ui/report.ts` の作成
   - 基本レイアウトとフィルター機能

2. **データ分析ロジック** (1週間)
   - `src/lib/analytics.ts` の作成
   - 統計計算・トレンド分析の実装

3. **視覚化とUX** (1週間)
   - グラフ表示・ハイライト機能
   - モバイル対応・最終調整

これで、明確な実装計画とゴールが設定されました！📊✨
